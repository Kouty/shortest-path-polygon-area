var SPPA=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);class r{constructor(t){this.root=t}bfIterator(){const t=[this.root];let e=0;return{next(){const n=t[e++],r=void 0===n;return r||t.push(...n.children),{done:r,value:n}},[Symbol.iterator]:function(){return this}}}}class o{constructor(t){this.children=[],this.value=t}addChild(t){return t.parent=this,this.children.push(t),this}}function s(t,e,n=0){if(function(t,e){const n=t[0],r=t[1],o=e[0][0],s=e[0][1],i=e[1][0],u=e[1][1];if(!Number.isFinite(s))return Math.abs(i-n);if(!Number.isFinite(u))return Math.abs(o-n);if(!Number.isFinite(o))return Math.abs(u-r);if(!Number.isFinite(i))return Math.abs(s-r);const l=u-s==0?0:(u-s)*n,c=i-o==0?0:(i-o)*r,f=Math.abs(l-c+i*s-u*o),a=Math.sqrt((u-s)**2+(i-o)**2);return f/a}(t,e)<=n)return s.ABOVE;const r=t[0],o=t[1],i=e[0][0],u=e[0][1],l=e[1][0],c=e[1][1],f=(r-i==0||c-u==0?0:(r-i)*(c-u))-(o-u==0||l-i==0?0:(o-u)*(l-i));return f<0?s.LEFT:0===f?s.ABOVE:s.RIGHT}function i(t,e){return Math.sqrt((t[0]-e[0])**2+(t[1]-e[1])**2)}function u([[t,e],[n,r]]){return[[Math.min(t,n),Math.max(e,r)],[Math.max(t,n),Math.min(e,r)]]}function l(t,e,n=0){function r(t,e){return t>e+n}function o(t,e){return t<e-n}const i=s(t,e,n);let c;if(i===s.LEFT)c=l.LEFT;else if(i===s.RIGHT)c=l.RIGHT;else{if(i!==s.ABOVE)throw new Error("Unexpected result from pointLineSide "+i.toString());{c=l.ABOVE;const n=u(e);(o(t[0],n[0][0])||r(t[0],n[1][0])||r(t[1],n[0][1])||o(t[1],n[1][1]))&&(c=l.INLINE_OUTSIDE)}}return c}function c(t,e,n){let r=0;const o=[e,[e[0],Number.POSITIVE_INFINITY]];for(const e of d(t)){const t=S(o,e,n),{side1A:s,side2A:i,side2B:u}=t;if(s===l.ABOVE)return c.ABOVE;const f=i===l.ABOVE&&u===l.LEFT,a=i===l.LEFT&&u===l.ABOVE;(t.crosses()||f||a)&&r++}return r%2==0?c.OUTSIDE:c.INSIDE}function f(t,e){return t===l.RIGHT&&e===l.LEFT||t===l.LEFT&&e===l.RIGHT}function a(t,e,n){const r=[e[0]],o={[JSON.stringify(e[0])]:!0,[JSON.stringify(e[1])]:!0};for(const s of d(t)){const t=S(e,s,n),{side2A:i,side2B:u}=t;if(t.crosses())return a.CROSS;const c=JSON.stringify(s[0]),f=JSON.stringify(s[1]);i!==l.ABOVE||o[c]||(r.push(s[0]),o[c]=!0),u!==l.ABOVE||o[f]||(r.push(s[1]),o[f]=!0)}r.push(e[1]);const s=function(t){const e=[];for(let n=1;n<t.length;n++)e.push([t[n-1],t[n]]);return e}(r);let i=!1,u=!1;for(const e of s){const r=c(t,h(e),n);r===c.INSIDE&&(i=!0),r===c.OUTSIDE&&(u=!0)}return i&&u?a.CROSS:i?a.INSIDE:u?a.OUTSIDE:a.ABOVE}function d(t){const e=[];let n=t[0];for(let r=1;r<=t.length;r++){const o=[n,t[r>=t.length?0:r]];e.push(o),n=o[1]}return e}function S(t,e,n){const r=l(t[0],e,n),o=l(t[1],e,n),s=l(e[0],t),i=l(e[1],t);return{side1A:r,side1B:o,side2A:s,side2B:i,crosses:()=>f(r,o)&&f(s,i)}}function h(t){return[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]}s.LEFT=Symbol("pointLineSide.LEFT"),s.RIGHT=Symbol("pointLineSide.RIGHT"),s.ABOVE=Symbol("pointLineSide.ABOVE"),l.LEFT=Symbol("segmentPointSide.LEFT"),l.RIGHT=Symbol("segmentPointSide.RIGHT"),l.ABOVE=Symbol("segmentPointSide.ABOVE"),l.INLINE_OUTSIDE=Symbol("segmentPointSide.INLINE_OUTSIDE"),c.INSIDE=Symbol("polyPointInside.INSIDE"),c.ABOVE=Symbol("polyPointInside.ABOVE"),c.OUTSIDE=Symbol("polyPointInside.OUTSIDE"),a.INSIDE=Symbol("polySegmentInside.INSIDE"),a.OUTSIDE=Symbol("polySegmentInside.OUTSIDE"),a.ABOVE=Symbol("polySegmentInside.ABOVE"),a.CROSS=Symbol("polySegmentInside.CROSS");class I{constructor({bounds:t=[],holes:e=[]}){this.bounds=t,this.holes=e}insideBounds(t,e){if(0===this.bounds.length)return!0;const n=a(this.bounds,t,e);return n===a.INSIDE||n===a.ABOVE}crossesHole(t,e){let n=null;return this.holes.some(r=>{const o=a(r,t,e);return o!==a.OUTSIDE&&o!==a.ABOVE&&(n=r,!0)}),n}insideArea(t,e){return!this.crossesHole(t,e)&&this.insideBounds(t,e)}allVertices(){let t=[];return this.holes.forEach(e=>{t=t.concat(e)}),t=t.concat(this.bounds)}}e.default=class{constructor({bounds:t,holes:e}){this.area=new I({bounds:t,holes:e})}calculate({from:t,to:e,useCache:n=!0},s){const u=this.area.allVertices();u.push(e);const l=new r(new o({point:t,dist:0}));let c,f=[];const a=new Map;do{c=!1;let t=Number.POSITIVE_INFINITY,r=null,d=null;const S=l.bfIterator();for(const o of S)u.some((u,l)=>{const f=[o.value.point,u],S=JSON.stringify(f);let h=a.get(S);if(void 0===h&&(h=this.area.insideArea(f,s),n&&a.set(S,h)),h){c=!0;const n=i(f[0],f[1])+o.value.dist;if(n<t&&(t=n,r=l,d=o),f[1]===e)return!0}return!1});if(null!==r){const n=u[r],s=new o({point:n,dist:t});if(d.addChild(s),u.splice(r,1),n===e){f=this._createPath(s);break}}}while(c);return f}_createPath(t){let e=t;const n=[];for(;null!=e;)n.push(e.value.point),e=e.parent;return n.reverse(),n}}}]);